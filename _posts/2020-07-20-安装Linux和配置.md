---
layout: post
title: '安装Linux和配置'
date: 2020-07-20 17:06:03 +0800
categories: Linux
---

`Linux`作为世界上主流的服务器系统，并且通过强大的开源社区形成了独立的系统体系。因为图形界面的框架有很多很多各个操作大致相同，所以为了实际生产生活需要只用命令行终端作为教程的对象，旨在配置一个可以舒适使用的服务端操作系统。

## 安装

### 安装准备

> 能够下载文件的电脑
>
> 一块`8G`的优盘
>
> 合适够用的刻录软件

#### 下载

通常有很多的发行版可以去使用，他们的系统内核是相同的（可能版本不同）但是有着不同的设计理念和外观还有包管理系统。服务器常使用的是和`RedHat`同源的`CentOS`他们的包更新比较保守，有较高的稳定性。选择所需要的操作系统的运行环境的对应的版本即可。

#### 制作优盘

下载完成的文件常是一个`iso`文件，早些年系统安装主要依赖的介质时光盘，这种文件需要通过刻录软件来刻录在优盘上，刻录工具有很多，这里无法统统介绍，可以按照网上教程一步一步来就行了。

### 向导

#### 软件选择

有些系统的镜像可以在安装时联网下载各种软件，但是如果不需要图形界面就要下载的时最小安装版本，或者在安装的时候**取消勾选附带的软件**。

> 最小安装版最省空间，没有图形界面占用资源

#### 分区设置

可以选择默认分区设置，也可以自定义分区。**需要记住的是`Linux`是磁盘挂载在分区上**这一点和`Windows`不太相同。如何分区完全按自由，这里记录这些分区的功能作为参考。

- 根目录`/`

作为所有目录的总目录，安装系统和软件建议设置大一些。

- 家目录`/home`

用户的专属区域，每个用户都可以创建自己的，存放个人文件看个人文件多少设定大小。

- 交换区域`/swap`

交换区相当于用硬盘作为内存的缓冲，防止爆内存的情况发生常常设置`2G`或者`4G`。

- 引导分区`/boot`

引导系统启动的分区，放置引导文件设置`256-512M`就够了。

其他还有很多的分区可以细分，但是不大必要，**需要注意`/bin /sbin /lib /etc /dev`不能脱离根目录，`/home /var /usr`处于稳定性和个人文件和系统文件的区分来讲尽量和根目录分开。**

## 配置

安装完系统之后要进行配置，因为是用于服务器使用所以直接使用`root`用户的前提是用户非常清楚自己的操作产生的后果，所以不再创建普通用户了。

### 系统设置

`Linux`是一种可自定义程度很高的系统，设置之后的顺手程度不亚于任何操作系统。

#### 更新系统

首先应该确保系统和软件的时效性，在`Linux`系统中常常只需要一行代码就能全部更新一切软件和系统。

```bash
# 更新所有的包系统版本升级，内核升级
yum upgrade
# 两个都可以使用，效果上并无差别
yum update
```

#### 更改主机名

首先删除原来的主机名，再设置新的主机名。这样做是完全更改主机名称，而且永久生效。

- 静态主机名

该主机名是内核主机名是从`/etc/hostname`中系统初始化的主机名。

- 瞬态主机名

这个是在运行时临时分配的主机名，`DHCP`或者`DNS`服务器分配的。

- 灵活主机名

主机名称的别名。

```bash
hostnamectl set-hostname ""
# 静态
hostnamectl set-hostname "" --static
# 灵活
hostnamectl set-hostname "" --pretty
# 瞬时
hostnamectl set-hostname "" --transient
```

更改完之后要更改`hosts`中的设置更改为新的后重启。

```bash
vim /etc/hosts
```

#### 安装`Git`

对于开源社区的软件获取或者一些实际生产中的操作来说`Git`是不可或缺的，他既可以下载软件也可以作为自己的版本管理工具。

```bash
yum install -y git
# 安装完之后要进行配置
git config --global user.name "" # 填入用户名
git config --global user.email # 输入邮箱地址
```

#### 美化终端

失去了图形界面，那一切的工作都将在终端命令行中完成，对于`Linux`默认的终端命令行解释器是`Bash`，但是使用更强大的`Zsh`可以提高效率和美化终端。

- 更换解释器

```bash
yum install -y zsh
```

- 切换默认`Shell`

```bash
# 查看目前终端
echo $SHELL
# 切换终端
chsh -s /bin/zsh
```

重新启动或者推出当前终端再进入之后就是新的`Zsh`终端了。

- 安装美化

默认的情况下已经很棒了，但是还可以进一步设置变得更加好用，比如更改主题，增加插件等等操作。

```bash
# 两种方法都需要依赖于Git
sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
sh -c "$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)"
```

安装完之后更改主题或者插件，通过修改`~/.zshrc`文件之后就执行`source ~/.zshrc`命令来刷新终端即可。

### 配置`Vim`

`Vim`它是一个上古神器，很早就已经出现了，并且经久不衰。当无法通过图形界面来编辑文本或者代码的时候这种终端内的编辑器就显得尤为重要，可以直接在终端内进行文本操作，但是为了达到很好的体验还需要很多的配置和磨合。

#### 美化界面

对于不常使用`Vim`的人来说配置`.vimrc`文件是一件很痛苦的事情，所以直接采用现成的配置可以减轻配置的负担。具体的安装在官网上已经有很详细的文档了，网址如下<https://spacevim.org/>。
